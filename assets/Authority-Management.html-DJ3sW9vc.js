import{_ as n,c as e,b as a,o as t}from"./app-BHE9oQwv.js";const o={};function r(i,s){return t(),e("div",null,s[0]||(s[0]=[a(`<h1 id="database-administration" tabindex="-1"><a class="header-anchor" href="#database-administration"><span>Database Administration</span></a></h1><p>IoTDB provides permission management operations, offering users the ability to manage permissions for data and cluster systems, ensuring data and system security.</p><p>This article introduces the basic concepts of the permission module in IoTDB, including user definition, permission management, authentication logic, and use cases. In the JAVA programming environment, you can use the <a href="https://chat.openai.com/API/Programming-JDBC.md" target="_blank" rel="noopener noreferrer">JDBC API</a> to execute permission management statements individually or in batches.</p><h2 id="basic-concepts" tabindex="-1"><a class="header-anchor" href="#basic-concepts"><span>Basic Concepts</span></a></h2><h3 id="user" tabindex="-1"><a class="header-anchor" href="#user"><span>User</span></a></h3><p>A user is a legitimate user of the database. Each user corresponds to a unique username and has a password as a means of authentication. Before using the database, a person must provide a valid (i.e., stored in the database) username and password for a successful login.</p><h3 id="permission" tabindex="-1"><a class="header-anchor" href="#permission"><span>Permission</span></a></h3><p>The database provides various operations, but not all users can perform all operations. If a user can perform a certain operation, they are said to have permission to execute that operation. Permissions are typically limited in scope by a path, and <a href="https://chat.openai.com/Basic-Concept/Data-Model-and-Terminology.md" target="_blank" rel="noopener noreferrer">path patterns</a> can be used to manage permissions flexibly.</p><h3 id="role" tabindex="-1"><a class="header-anchor" href="#role"><span>Role</span></a></h3><p>A role is a collection of multiple permissions and has a unique role name as an identifier. Roles often correspond to real-world identities (e.g., a traffic dispatcher), and a real-world identity may correspond to multiple users. Users with the same real-world identity often have the same permissions, and roles are abstractions for unified management of such permissions.</p><h3 id="default-users-and-roles" tabindex="-1"><a class="header-anchor" href="#default-users-and-roles"><span>Default Users and Roles</span></a></h3><p>After installation and initialization, IoTDB includes a default user: root, with the default password root. This user is an administrator with fixed permissions, which cannot be granted or revoked and cannot be deleted. There is only one administrator user in the database.</p><p>A newly created user or role does not have any permissions initially.</p><h2 id="user-definition" tabindex="-1"><a class="header-anchor" href="#user-definition"><span>User Definition</span></a></h2><p>Users with MANAGE_USER and MANAGE_ROLE permissions or administrators can create users or roles. Creating a user must meet the following constraints.</p><h3 id="username-constraints" tabindex="-1"><a class="header-anchor" href="#username-constraints"><span>Username Constraints</span></a></h3><p>4 to 32 characters, supports the use of uppercase and lowercase English letters, numbers, and special characters (<code>!@#$%^&amp;*()_+-=</code>).</p><p>Users cannot create users with the same name as the administrator.</p><h3 id="password-constraints" tabindex="-1"><a class="header-anchor" href="#password-constraints"><span>Password Constraints</span></a></h3><p>4 to 32 characters, can use uppercase and lowercase letters, numbers, and special characters (<code>!@#$%^&amp;*()_+-=</code>). Passwords are encrypted by default using MD5.</p><h3 id="role-name-constraints" tabindex="-1"><a class="header-anchor" href="#role-name-constraints"><span>Role Name Constraints</span></a></h3><p>4 to 32 characters, supports the use of uppercase and lowercase English letters, numbers, and special characters (<code>!@#$%^&amp;*()_+-=</code>).</p><p>Users cannot create roles with the same name as the administrator.</p><h2 id="permission-management" tabindex="-1"><a class="header-anchor" href="#permission-management"><span>Permission Management</span></a></h2><p>IoTDB primarily has two types of permissions: series permissions and global permissions.</p><h3 id="series-permissions" tabindex="-1"><a class="header-anchor" href="#series-permissions"><span>Series Permissions</span></a></h3><p>Series permissions constrain the scope and manner in which users access data. IOTDB support authorization for both absolute paths and prefix-matching paths, and can be effective at the timeseries granularity.</p><p>The table below describes the types and scope of these permissions:</p><table><thead><tr><th>Permission Name</th><th>Description</th></tr></thead><tbody><tr><td>READ_DATA</td><td>Allows reading time series data under the authorized path.</td></tr><tr><td>WRITE_DATA</td><td>Allows reading time series data under the authorized path.<br>Allows inserting and deleting time series data under the authorized path.<br>Allows importing and loading data under the authorized path. When importing data, you need the WRITE_DATA permission for the corresponding path. When automatically creating databases or time series, you need MANAGE_DATABASE and WRITE_SCHEMA permissions.</td></tr><tr><td>READ_SCHEMA</td><td>Allows obtaining detailed information about the metadata tree under the authorized path, <br>including databases, child paths, child nodes, devices, time series, templates, views, etc.</td></tr><tr><td>WRITE_SCHEMA</td><td>Allows obtaining detailed information about the metadata tree under the authorized path.<br>Allows creating, deleting, and modifying time series, templates, views, etc. under the authorized path. When creating or modifying views, it checks the WRITE_SCHEMA permission for the view path and READ_SCHEMA permission for the data source. When querying and inserting data into views, it checks the READ_DATA and WRITE_DATA permissions for the view path.<br> Allows setting, unsetting, and viewing TTL under the authorized path. <br> Allows attaching or detaching templates under the authorized path.</td></tr></tbody></table><h3 id="global-permissions" tabindex="-1"><a class="header-anchor" href="#global-permissions"><span>Global Permissions</span></a></h3><p>Global permissions constrain the database functions that users can use and restrict commands that change the system and task state. Once a user obtains global authorization, they can manage the database.<br> The table below describes the types of system permissions:</p><table><thead><tr><th style="text-align:center;">Permission Name</th><th>Description</th></tr></thead><tbody><tr><td style="text-align:center;">MANAGE_DATABASE</td><td>Allow users to create and delete databases.</td></tr><tr><td style="text-align:center;">MANAGE_USER</td><td>Allow users to create, delete, modify, and view users.</td></tr><tr><td style="text-align:center;">MANAGE_ROLE</td><td>Allow users to create, delete, modify, and view roles. <br>Allow users to grant/revoke roles to/from other users.</td></tr><tr><td style="text-align:center;">USE_TRIGGER</td><td>Allow users to create, delete, and view triggers.<br>Independent of data source permission checks for triggers.</td></tr><tr><td style="text-align:center;">USE_UDF</td><td>Allow users to create, delete, and view user-defined functions. <br> Independent of data source permission checks for user-defined functions.</td></tr><tr><td style="text-align:center;">USE_CQ</td><td>Allow users to create, delete, and view continuous queries. <br> Independent of data source permission checks for continuous queries.</td></tr><tr><td style="text-align:center;">USE_PIPE</td><td>Allow users to create, start, stop, delete, and view pipelines. <br>Allow users to create, delete, and view pipeline plugins. <br>Independent of data source permission checks for pipelines.</td></tr><tr><td style="text-align:center;">EXTEND_TEMPLATE</td><td>Permission to automatically create templates.</td></tr><tr><td style="text-align:center;">MAINTAIN</td><td>Allow users to query and cancel queries. <br>Allow users to view variables. <br>Allow users to view cluster status.</td></tr><tr><td style="text-align:center;">USE_MODEL</td><td>Allow users to create, delete and view deep learning model.</td></tr><tr><td style="text-align:center;">Regarding template permissions:</td><td></td></tr></tbody></table><ol><li>Only administrators are allowed to create, delete, modify, query, mount, and unmount templates.</li><li>To activate a template, you need to have WRITE_SCHEMA permission for the activation path.</li><li>If automatic creation is enabled, writing to a non-existent path that has a template mounted will automatically extend the template and insert data. Therefore, one needs EXTEND_TEMPLATE permission and WRITE_DATA permission for writing to the sequence.</li><li>To deactivate a template, WRITE_SCHEMA permission for the mounted template path is required.</li><li>To query paths that use a specific metadata template, you needs READ_SCHEMA permission for the paths; otherwise, it will return empty results.</li></ol><h3 id="granting-and-revoking-permissions" tabindex="-1"><a class="header-anchor" href="#granting-and-revoking-permissions"><span>Granting and Revoking Permissions</span></a></h3><p>In IoTDB, users can obtain permissions through three methods:</p><ol><li>Granted by administrator, who has control over the permissions of other users.</li><li>Granted by a user allowed to authorize permissions, and this user was assigned the grant option keyword when obtaining the permission.</li><li>Granted a certain role by administrator or a user with MANAGE_ROLE, thereby obtaining permissions.</li></ol><p>Revoking a user&#39;s permissions can be done through the following methods:</p><ol><li>Revoked by administrator.</li><li>Revoked by a user allowed to authorize permissions, and this user was assigned the grant option keyword when obtaining the permission.</li><li>Revoked from a user&#39;s role by administrator or a user with MANAGE_ROLE, thereby revoking the permissions.</li></ol><ul><li>When granting permissions, a path must be specified. Global permissions need to be specified as root.**, while series-specific permissions must be absolute paths or prefix paths ending with a double wildcard.</li><li>When granting user/role permissions, you can specify the &quot;with grant option&quot; keyword for that permission, which means that the user can grant permissions on their authorized paths and can also revoke permissions on other users&#39; authorized paths. For example, if User A is granted read permission for <code>group1.company1.**</code> with the grant option keyword, then A can grant read permissions to others on any node or series below <code>group1.company1</code>, and can also revoke read permissions on any node below <code>group1.company1</code> for other users.</li><li>When revoking permissions, the revocation statement will match against all of the user&#39;s permission paths and clear the matched permission paths. For example, if User A has read permission for <code>group1.company1.factory1</code>, when revoking read permission for <code>group1.company1.**</code>, it will remove A&#39;s read permission for <code>group1.company1.factory1</code>.</li></ul><h2 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication"><span>Authentication</span></a></h2><p>User permissions mainly consist of three parts: permission scope (path), permission type, and the &quot;with grant option&quot; flag:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">userTest1:</span>
<span class="line">    root.t1.**    - read_schema, read_data 	- with grant option</span>
<span class="line">    root.** 	 - write_schema, write_data - with grant option</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each user has such a permission access list, identifying all the permissions they have acquired. You can view their permissions by using the command <code>LIST PRIVILEGES OF USER &lt;username&gt;</code>.</p><p>When authorizing a path, the database will match the path with the permissions. For example, when checking the read_schema permission for <code>root.t1.t2</code>, it will first match with the permission access list <code>root.t1.**</code>. If it matches successfully, it will then check if that path contains the permission to be authorized. If not, it continues to the next path-permission match until a match is found or all matches are exhausted.</p><p>When performing authorization for multiple paths, such as executing a multi-path query task, the database will only present data for which the user has permissions. Data for which the user does not have permissions will not be included in the results, and information about these paths without permissions will be output to the alert messages.</p><p>Please note that the following operations require checking multiple permissions:</p><ol><li><p>Enabling the automatic sequence creation feature requires not only write permission for the corresponding sequence when a user inserts data into a non-existent sequence but also metadata modification permission for the sequence.</p></li><li><p>When executing the &quot;select into&quot; statement, it is necessary to check the read permission for the source sequence and the write permission for the target sequence. It should be noted that the source sequence data may only be partially accessible due to insufficient permissions, and if the target sequence has insufficient write permissions, an error will occur, terminating the task.</p></li><li><p>View permissions and data source permissions are independent. Performing read and write operations on a view will only check the permissions of the view itself and will not perform permission validation on the source path.</p></li></ol><h2 id="function-syntax-and-examples" tabindex="-1"><a class="header-anchor" href="#function-syntax-and-examples"><span>Function Syntax and Examples</span></a></h2><p>IoTDB provides composite permissions for user authorization:</p><table><thead><tr><th>Permission Name</th><th>Permission Scope</th></tr></thead><tbody><tr><td>ALL</td><td>All permissions</td></tr><tr><td>READ</td><td>READ_SCHEMA, READ_DATA</td></tr><tr><td>WRITE</td><td>WRITE_SCHEMA, WRITE_DATA</td></tr></tbody></table><p>Composite permissions are not specific permissions themselves but a shorthand way to denote a combination of permissions, with no difference from directly specifying the corresponding permission names.</p><p>The following series of specific use cases will demonstrate the usage of permission statements. Non-administrator users executing the following statements require obtaining the necessary permissions, which are indicated after the operation description.</p><h3 id="user-and-role-related" tabindex="-1"><a class="header-anchor" href="#user-and-role-related"><span>User and Role Related</span></a></h3><ul><li>Create user (Requires MANAGE_USER permission)</li></ul><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL" data-title="SQL"><pre><code><span class="line">CREATE USER &lt;userName&gt; &lt;password&gt;</span>
<span class="line">eg: CREATE USER user1 &#39;passwd&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Delete user (Requires MANAGE_USER permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>userName<span class="token operator">&gt;</span></span>
<span class="line">eg: <span class="token keyword">DROP</span> <span class="token keyword">USER</span> user1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Create role (Requires MANAGE_ROLE permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> ROLE <span class="token operator">&lt;</span>roleName<span class="token operator">&gt;</span></span>
<span class="line">eg: <span class="token keyword">CREATE</span> ROLE role1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Delete role (Requires MANAGE_ROLE permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DROP</span> ROLE <span class="token operator">&lt;</span>roleName<span class="token operator">&gt;</span></span>
<span class="line">eg: <span class="token keyword">DROP</span> ROLE role1  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Grant role to user (Requires MANAGE_ROLE permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">GRANT</span> ROLE <span class="token operator">&lt;</span>ROLENAME<span class="token operator">&gt;</span> <span class="token keyword">TO</span> <span class="token operator">&lt;</span>USERNAME<span class="token operator">&gt;</span></span>
<span class="line">eg: <span class="token keyword">GRANT</span> ROLE admin <span class="token keyword">TO</span> user1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Revoke role from user(Requires MANAGE_ROLE permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">REVOKE</span> ROLE <span class="token operator">&lt;</span>ROLENAME<span class="token operator">&gt;</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span><span class="token keyword">USER</span><span class="token operator">&gt;</span></span>
<span class="line">eg: <span class="token keyword">REVOKE</span> ROLE admin <span class="token keyword">FROM</span> user1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>List all user (Requires MANAGE_USER permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST <span class="token keyword">USER</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>List all role (Requires MANAGE_ROLE permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST ROLE</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>List all users granted specific role.（Requires MANAGE_USER permission)</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST <span class="token keyword">USER</span> <span class="token keyword">OF</span> ROLE <span class="token operator">&lt;</span>roleName<span class="token operator">&gt;</span></span>
<span class="line">eg: LIST <span class="token keyword">USER</span> <span class="token keyword">OF</span> ROLE roleuser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>List all role granted to specific user.</p><p>Users can list their own roles, but listing roles of other users requires the MANAGE_ROLE permission.</p></li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST ROLE <span class="token keyword">OF</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> </span>
<span class="line">eg: LIST ROLE <span class="token keyword">OF</span> <span class="token keyword">USER</span> tempuser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>List all privileges of user</li></ul><p>Users can list their own privileges, but listing privileges of other users requires the MANAGE_USER permission.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST <span class="token keyword">PRIVILEGES</span> <span class="token keyword">OF</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">eg: LIST <span class="token keyword">PRIVILEGES</span> <span class="token keyword">OF</span> <span class="token keyword">USER</span> tempuser<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>List all privileges of role</li></ul><p>Users can list the permission information of roles they have, but listing permissions of other roles requires the MANAGE_ROLE permission.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST <span class="token keyword">PRIVILEGES</span> <span class="token keyword">OF</span> ROLE <span class="token operator">&lt;</span>roleName<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">eg: LIST <span class="token keyword">PRIVILEGES</span> <span class="token keyword">OF</span> ROLE actor<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Update password</li></ul><p>Users can update their own password, but updating passwords of other users requires the MANAGE_USER permission.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token keyword">SET</span> PASSWORD <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">ALTER</span> <span class="token keyword">USER</span> tempuser <span class="token keyword">SET</span> PASSWORD <span class="token string">&#39;newpwd&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="authorization-and-deauthorization" tabindex="-1"><a class="header-anchor" href="#authorization-and-deauthorization"><span>Authorization and Deauthorization</span></a></h3><p>Users can use authorization statements to grant permissions to other users. The syntax is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">GRANT</span> <span class="token operator">&lt;</span><span class="token keyword">PRIVILEGES</span><span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span>PATHS<span class="token operator">&gt;</span> <span class="token keyword">TO</span> ROLE<span class="token operator">/</span><span class="token keyword">USER</span> <span class="token operator">&lt;</span>NAME<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">]</span>；</span>
<span class="line">eg: <span class="token keyword">GRANT</span> <span class="token keyword">READ</span> <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> ROLE role1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">GRANT</span> READ_DATA<span class="token punctuation">,</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">GRANT</span> READ_DATA<span class="token punctuation">,</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span>root<span class="token punctuation">.</span>t2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">GRANT</span> MANAGE_ROLE <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1 <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1 <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Users can use deauthorization statements to revoke permissions from others. The syntax is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">REVOKE</span> <span class="token operator">&lt;</span><span class="token keyword">PRIVILEGES</span><span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span>PATHS<span class="token operator">&gt;</span> <span class="token keyword">FROM</span> ROLE<span class="token operator">/</span><span class="token keyword">USER</span> <span class="token operator">&lt;</span>NAME<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">REVOKE</span> <span class="token keyword">READ</span> <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> ROLE role1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">REVOKE</span> READ_DATA<span class="token punctuation">,</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">REVOKE</span> READ_DATA<span class="token punctuation">,</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> root<span class="token punctuation">.</span>t2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">REVOKE</span> MANAGE_ROLE <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line">eg: <span class="token keyword">REVOKE</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> ROOT<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>When non-administrator users execute authorization/deauthorization statements, they need to have &lt;PRIVILEGES&gt; permissions on &lt;PATHS&gt;, and these permissions must be marked with WITH GRANT OPTION.</strong></p></li><li><p>When granting or revoking global permissions or when the statement contains global permissions (expanding ALL includes global permissions), you must specify the path as root**. For example, the following authorization/deauthorization statements are valid:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">GRANT</span> MANAGE_USER <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">GRANT</span> MANAGE_ROLE <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> ROLE role1  <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span>  root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> role role1  <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">REVOKE</span> MANAGE_USER <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">REVOKE</span> MANAGE_ROLE <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> ROLE role1<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">REVOKE</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> ROLE role1<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The following statements are invalid:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">READ</span><span class="token punctuation">,</span> MANAGE_ROLE <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span>t2 <span class="token keyword">TO</span> <span class="token keyword">USER</span> user1 <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">REVOKE</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span>t2 <span class="token keyword">FROM</span> <span class="token keyword">USER</span> user1<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">REVOKE</span> <span class="token keyword">READ</span><span class="token punctuation">,</span> MANAGE_ROLE <span class="token keyword">ON</span> root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span>t2 <span class="token keyword">FROM</span> ROLE ROLE1<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>&lt;PATH&gt; must be a full path or a matching path ending with a double wildcard. The following paths are valid:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">root<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span></span>
<span class="line">root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span>t2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span></span>
<span class="line">root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span>t2<span class="token punctuation">.</span>t3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The following paths are invalid:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span></span>
<span class="line">root<span class="token punctuation">.</span>t1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">.</span>t2</span>
<span class="line">root<span class="token punctuation">.</span>t1<span class="token operator">*</span><span class="token punctuation">.</span>t2<span class="token punctuation">.</span>t3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="examples" tabindex="-1"><a class="header-anchor" href="#examples"><span>Examples</span></a></h2><p>Based on the described <a href="https://github.com/thulab/iotdb/files/4438687/OtherMaterial-Sample.Data.txt" target="_blank" rel="noopener noreferrer">sample data</a>, IoTDB&#39;s sample data may belong to different power generation groups such as ln, sgcc, and so on. Different power generation groups do not want other groups to access their database data, so we need to implement data isolation at the group level.</p><h4 id="create-users" tabindex="-1"><a class="header-anchor" href="#create-users"><span>Create Users</span></a></h4><p>Use <code>CREATE USER &lt;userName&gt; &lt;password&gt;</code> to create users. For example, we can create two users for the ln and sgcc groups with the root user, who has all permissions, and name them ln_write_user and sgcc_write_user. It is recommended to enclose the username in backticks. The SQL statements are as follows:</p><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL" data-title="SQL"><pre><code><span class="line">CREATE USER \`ln_write_user\` &#39;write_pwd&#39; </span>
<span class="line">CREATE USER \`sgcc_write_user\` &#39;write_pwd&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, using the SQL statement to display users:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">LIST <span class="token keyword">USER</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We can see that these two users have been created, and the result is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>ln_write_user<span class="token punctuation">\`</span></span> <span class="token string">&#39;write_pwd&#39;</span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>sgcc_write_user<span class="token punctuation">\`</span></span> <span class="token string">&#39;write_pwd&#39;</span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line">IoTDB<span class="token operator">&gt;</span> LIST <span class="token keyword">USER</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">---------------+</span></span>
<span class="line"><span class="token operator">|</span>           <span class="token keyword">user</span><span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">---------------+</span></span>
<span class="line"><span class="token operator">|</span>  ln_write_user<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>           root<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>sgcc_write_user<span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">---------------+</span></span>
<span class="line">Total line number <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line">It costs <span class="token number">0.012</span>s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="granting-permissions-to-users" tabindex="-1"><a class="header-anchor" href="#granting-permissions-to-users"><span>Granting Permissions to Users</span></a></h4><p>At this point, although two users have been created, they do not have any permissions, so they cannot operate on the database. For example, if we use the ln_write_user to write data to the database, the SQL statement is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01<span class="token punctuation">(</span><span class="token keyword">timestamp</span><span class="token punctuation">,</span><span class="token keyword">status</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1509465600000</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>At this point, the system does not allow this operation, and an error is displayed:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01<span class="token punctuation">(</span><span class="token keyword">timestamp</span><span class="token punctuation">,</span><span class="token keyword">status</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1509465600000</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">Msg: <span class="token number">803</span>: <span class="token keyword">No</span> permissions <span class="token keyword">for</span> this operation<span class="token punctuation">,</span> please <span class="token keyword">add</span> privilege WRITE_DATA <span class="token keyword">on</span> <span class="token punctuation">[</span>root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01<span class="token punctuation">.</span><span class="token keyword">status</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, we will grant each user write permissions to the corresponding paths using the root user.</p><p>We use the <code>GRANT &lt;PRIVILEGES&gt; ON &lt;PATHS&gt; TO USER &lt;username&gt;</code> statement to grant permissions to users, for example:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">GRANT</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>ln_write_user<span class="token punctuation">\`</span></span></span>
<span class="line"><span class="token keyword">GRANT</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>sgcc1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> root<span class="token punctuation">.</span>sgcc2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>sgcc_write_user<span class="token punctuation">\`</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>The execution status is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">GRANT</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>ln_write_user<span class="token punctuation">\`</span></span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">GRANT</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>sgcc1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> root<span class="token punctuation">.</span>sgcc2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>sgcc_write_user<span class="token punctuation">\`</span></span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, using ln_write_user, try to write data again:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01<span class="token punctuation">(</span><span class="token keyword">timestamp</span><span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1509465600000</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="revoking-user-permissions" tabindex="-1"><a class="header-anchor" href="#revoking-user-permissions"><span>Revoking User Permissions</span></a></h4><p>After granting user permissions, we can use the <code>REVOKE &lt;PRIVILEGES&gt; ON &lt;PATHS&gt; FROM USER &lt;USERNAME&gt;</code> to revoke the permissions granted to users. For example, using the root user to revoke the permissions of ln_write_user and sgcc_write_user:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">REVOKE</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>ln_write_user<span class="token punctuation">\`</span></span></span>
<span class="line"><span class="token keyword">REVOKE</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>sgcc1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> root<span class="token punctuation">.</span>sgcc2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>sgcc_write_user<span class="token punctuation">\`</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>The execution status is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">REVOKE</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>ln_write_user<span class="token punctuation">\`</span></span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">REVOKE</span> WRITE_DATA <span class="token keyword">ON</span> root<span class="token punctuation">.</span>sgcc1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> root<span class="token punctuation">.</span>sgcc2<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> <span class="token identifier"><span class="token punctuation">\`</span>sgcc_write_user<span class="token punctuation">\`</span></span></span>
<span class="line">Msg: The statement <span class="token operator">is</span> executed successfully<span class="token punctuation">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After revoking the permissions, ln_write_user no longer has the permission to write data to root.ln.**:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01<span class="token punctuation">(</span><span class="token keyword">timestamp</span><span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1509465600000</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">Msg: <span class="token number">803</span>: <span class="token keyword">No</span> permissions <span class="token keyword">for</span> this operation<span class="token punctuation">,</span> please <span class="token keyword">add</span> privilege WRITE_DATA <span class="token keyword">on</span> <span class="token punctuation">[</span>root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01<span class="token punctuation">.</span><span class="token keyword">status</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="other-explanations" tabindex="-1"><a class="header-anchor" href="#other-explanations"><span>Other Explanations</span></a></h2><p>Roles are collections of permissions, and both permissions and roles are attributes of users. In other words, a role can have multiple permissions, and a user can have multiple roles and permissions (referred to as the user&#39;s self-permissions).</p><p>Currently, in IoTDB, there are no conflicting permissions. Therefore, the actual permissions a user has are the union of their self-permissions and the permissions of all their roles. In other words, to determine if a user can perform a certain operation, it&#39;s necessary to check whether their self-permissions or the permissions of all their roles allow that operation. Self-permissions, role permissions, and the permissions of multiple roles a user has may contain the same permission, but this does not have any impact.</p><p>It&#39;s important to note that if a user has a certain permission (corresponding to operation A) on their own, and one of their roles has the same permission, revoking the permission from the user alone will not prevent the user from performing operation A. To prevent the user from performing operation A, you need to revoke the permission from both the user and the role, or remove the user from the role that has the permission. Similarly, if you only revoke the permission from the role, it won&#39;t prevent the user from performing operation A if they have the same permission on their own.</p><p>At the same time, changes to roles will be immediately reflected in all users who have that role. For example, adding a certain permission to a role will immediately grant that permission to all users who have that role, and removing a certain permission will cause those users to lose that permission (unless the user has it on their own).</p><h2 id="upgrading-from-a-previous-version" tabindex="-1"><a class="header-anchor" href="#upgrading-from-a-previous-version"><span>Upgrading from a previous version</span></a></h2><p>Before version 1.3, there were many different permission types. In 1.3 version&#39;s implementation, we have streamlined the permission types.</p><p>The permission paths in version 1.3 of the database must be either full paths or matching paths ending with a double wildcard. During system upgrades, any invalid permission paths and permission types will be automatically converted. The first invalid node on the path will be replaced with &quot;**&quot;, and any unsupported permission types will be mapped to the permissions supported by the current system.</p><table><thead><tr><th>Permission</th><th>Path</th><th>Mapped-Permission</th><th>Mapped-path</th></tr></thead><tbody><tr><td>CREATE_DATBASE</td><td>root.db.t1.*</td><td>MANAGE_DATABASE</td><td>root.**</td></tr><tr><td>INSERT_TIMESERIES</td><td>root.db.t2.*.t3</td><td>WRITE_DATA</td><td>root.db.t2.**</td></tr><tr><td>CREATE_TIMESERIES</td><td>root.db.t2*c.t3</td><td>WRITE_SCHEMA</td><td>root.db.**</td></tr><tr><td>LIST_ROLE</td><td>root.**</td><td>(ignore)</td><td></td></tr></tbody></table><p>You can refer to the table below for a comparison of permission types between the old and new versions (where &quot;--IGNORE&quot; indicates that the new version ignores that permission):</p><table><thead><tr><th>Permission Name</th><th>Path-Related</th><th>New Permission Name</th><th>Path-Related</th></tr></thead><tbody><tr><td>CREATE_DATABASE</td><td>YES</td><td>MANAGE_DATABASE</td><td>NO</td></tr><tr><td>INSERT_TIMESERIES</td><td>YES</td><td>WRITE_DATA</td><td>YES</td></tr><tr><td>UPDATE_TIMESERIES</td><td>YES</td><td>WRITE_DATA</td><td>YES</td></tr><tr><td>READ_TIMESERIES</td><td>YES</td><td>READ_DATA</td><td>YES</td></tr><tr><td>CREATE_TIMESERIES</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>DELETE_TIMESERIES</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>CREATE_USER</td><td>NO</td><td>MANAGE_USER</td><td>NO</td></tr><tr><td>DELETE_USER</td><td>NO</td><td>MANAGE_USER</td><td>NO</td></tr><tr><td>MODIFY_PASSWORD</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>LIST_USER</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>GRANT_USER_PRIVILEGE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>REVOKE_USER_PRIVILEGE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>GRANT_USER_ROLE</td><td>NO</td><td>MANAGE_ROLE</td><td>NO</td></tr><tr><td>REVOKE_USER_ROLE</td><td>NO</td><td>MANAGE_ROLE</td><td>NO</td></tr><tr><td>CREATE_ROLE</td><td>NO</td><td>MANAGE_ROLE</td><td>NO</td></tr><tr><td>DELETE_ROLE</td><td>NO</td><td>MANAGE_ROLE</td><td>NO</td></tr><tr><td>LIST_ROLE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>GRANT_ROLE_PRIVILEGE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>REVOKE_ROLE_PRIVILEGE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>CREATE_FUNCTION</td><td>NO</td><td>USE_UDF</td><td>NO</td></tr><tr><td>DROP_FUNCTION</td><td>NO</td><td>USE_UDF</td><td>NO</td></tr><tr><td>CREATE_TRIGGER</td><td>YES</td><td>USE_TRIGGER</td><td>NO</td></tr><tr><td>DROP_TRIGGER</td><td>YES</td><td>USE_TRIGGER</td><td>NO</td></tr><tr><td>START_TRIGGER</td><td>YES</td><td>USE_TRIGGER</td><td>NO</td></tr><tr><td>STOP_TRIGGER</td><td>YES</td><td>USE_TRIGGER</td><td>NO</td></tr><tr><td>CREATE_CONTINUOUS_QUERY</td><td>NO</td><td>USE_CQ</td><td>NO</td></tr><tr><td>DROP_CONTINUOUS_QUERY</td><td>NO</td><td>USE_CQ</td><td>NO</td></tr><tr><td>ALL</td><td>NO</td><td>All privilegs</td><td></td></tr><tr><td>DELETE_DATABASE</td><td>YES</td><td>MANAGE_DATABASE</td><td>NO</td></tr><tr><td>ALTER_TIMESERIES</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>UPDATE_TEMPLATE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>READ_TEMPLATE</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>APPLY_TEMPLATE</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>READ_TEMPLATE_APPLICATION</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>SHOW_CONTINUOUS_QUERIES</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>CREATE_PIPEPLUGIN</td><td>NO</td><td>USE_PIPE</td><td>NO</td></tr><tr><td>DROP_PIPEPLUGINS</td><td>NO</td><td>USE_PIPE</td><td>NO</td></tr><tr><td>SHOW_PIPEPLUGINS</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>CREATE_PIPE</td><td>NO</td><td>USE_PIPE</td><td>NO</td></tr><tr><td>START_PIPE</td><td>NO</td><td>USE_PIPE</td><td>NO</td></tr><tr><td>STOP_PIPE</td><td>NO</td><td>USE_PIPE</td><td>NO</td></tr><tr><td>DROP_PIPE</td><td>NO</td><td>USE_PIPE</td><td>NO</td></tr><tr><td>SHOW_PIPES</td><td>NO</td><td>-- IGNORE</td><td></td></tr><tr><td>CREATE_VIEW</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>ALTER_VIEW</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>RENAME_VIEW</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr><tr><td>DELETE_VIEW</td><td>YES</td><td>WRITE_SCHEMA</td><td>YES</td></tr></tbody></table>`,127)]))}const l=n(o,[["render",r],["__file","Authority-Management.html.vue"]]),d=JSON.parse('{"path":"/UserGuide/latest/User-Manual/Authority-Management.html","title":"Database Administration","lang":"en-US","frontmatter":{"description":"Database Administration IoTDB provides permission management operations, offering users the ability to manage permissions for data and cluster systems, ensuring data and system ...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://iotdb.apache.org/zh/UserGuide/latest/User-Manual/Authority-Management.html"}],["meta",{"property":"og:url","content":"https://iotdb.apache.org/UserGuide/latest/User-Manual/Authority-Management.html"}],["meta",{"property":"og:site_name","content":"IoTDB Website"}],["meta",{"property":"og:title","content":"Database Administration"}],["meta",{"property":"og:description","content":"Database Administration IoTDB provides permission management operations, offering users the ability to manage permissions for data and cluster systems, ensuring data and system ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-02T07:41:39.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-02T07:41:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Database Administration\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-09-02T07:41:39.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Basic Concepts","slug":"basic-concepts","link":"#basic-concepts","children":[{"level":3,"title":"User","slug":"user","link":"#user","children":[]},{"level":3,"title":"Permission","slug":"permission","link":"#permission","children":[]},{"level":3,"title":"Role","slug":"role","link":"#role","children":[]},{"level":3,"title":"Default Users and Roles","slug":"default-users-and-roles","link":"#default-users-and-roles","children":[]}]},{"level":2,"title":"User Definition","slug":"user-definition","link":"#user-definition","children":[{"level":3,"title":"Username Constraints","slug":"username-constraints","link":"#username-constraints","children":[]},{"level":3,"title":"Password Constraints","slug":"password-constraints","link":"#password-constraints","children":[]},{"level":3,"title":"Role Name Constraints","slug":"role-name-constraints","link":"#role-name-constraints","children":[]}]},{"level":2,"title":"Permission Management","slug":"permission-management","link":"#permission-management","children":[{"level":3,"title":"Series Permissions","slug":"series-permissions","link":"#series-permissions","children":[]},{"level":3,"title":"Global Permissions","slug":"global-permissions","link":"#global-permissions","children":[]},{"level":3,"title":"Granting and Revoking Permissions","slug":"granting-and-revoking-permissions","link":"#granting-and-revoking-permissions","children":[]}]},{"level":2,"title":"Authentication","slug":"authentication","link":"#authentication","children":[]},{"level":2,"title":"Function Syntax and Examples","slug":"function-syntax-and-examples","link":"#function-syntax-and-examples","children":[{"level":3,"title":"User and Role Related","slug":"user-and-role-related","link":"#user-and-role-related","children":[]},{"level":3,"title":"Authorization and Deauthorization","slug":"authorization-and-deauthorization","link":"#authorization-and-deauthorization","children":[]}]},{"level":2,"title":"Examples","slug":"examples","link":"#examples","children":[]},{"level":2,"title":"Other Explanations","slug":"other-explanations","link":"#other-explanations","children":[]},{"level":2,"title":"Upgrading from a previous version","slug":"upgrading-from-a-previous-version","link":"#upgrading-from-a-previous-version","children":[]}],"git":{"createdTime":1690869728000,"updatedTime":1725262899000,"contributors":[{"name":"CritasWang","email":"critas@outlook.com","commits":1},{"name":"石林松","email":"50943998+shi10lin0s@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":11.69,"words":3506},"filePathRelative":"UserGuide/latest/User-Manual/Authority-Management.md","localizedDate":"August 1, 2023","autoDesc":true}');export{l as comp,d as data};
